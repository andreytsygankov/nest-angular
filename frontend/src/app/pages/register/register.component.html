<div class="container-form">
    <form class="form-signin" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <h2 class="form-signin__title">Register</h2>
        <mat-form-field appearance="outline">
            <mat-label>First name</mat-label>
            <input matInput
                   [ngClass]="inputClasses(form, 'firstName')"
                   formControlName="firstName">
            <div *ngIf="form.firstName.touched && form.firstName.errors" class="group-errors">
                <div *ngIf="form.firstName.errors.required">First name is required</div>
            </div>
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Last name</mat-label>
            <input matInput
                   [ngClass]="inputClasses(form, 'lastName')"
                   formControlName="lastName">
            <div *ngIf="form.lastName.touched && form.lastName.errors" class="group-errors">
                <div *ngIf="form.lastName.errors.required">Last name is required</div>
            </div>
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Address</mat-label>
            <input matInput
                   [ngClass]="inputClasses(form, 'address')"
                   formControlName="address">
            <div *ngIf="form.address.touched && form.address.errors" class="group-errors">
                <div *ngIf="form.address.errors.required">Last name is required</div>
            </div>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
            <input matInput
                   [ngClass]="inputClasses(form, 'email')"
                   formControlName="email">
            <div *ngIf="form.email.touched && form.email.errors" class="group-errors">
                <div *ngIf="form.email.errors.required">Email is required</div>
            </div>
            <div *ngIf="form.email.dirty && form.email.errors" class="group-errors">
                <div *ngIf="form.email.errors.email">Invalid email format</div>
            </div>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
            <input matInput
                   type="password"
                   [ngClass]="inputClasses(form, 'password')"
                   formControlName="password"
                   (focus)="passwordPopUp = true"
                   (blur)="passwordPopUp = false"
            >
            <div *ngIf="form.password.touched && form.password.errors" class="group-errors">
                <div *ngIf="form.password.errors.required">Password is required</div>
            </div>
            <div *ngIf="passwordPopUp && form.password.errors" class="input-popup">
                <div class="input-popup__error">
                    <div *ngIf="!form.password.errors.isValidChar" class="input-popup__error_text">Password should contain at least one lowercase letter, at least one uppercase letter and at least one number</div>
                    <div *ngIf="!form.password.errors.isValidLong && form.password.value.length > 40" class="input-popup__error_text">Password should contain no more than 40 symbols</div>
                    <div *ngIf="!form.password.errors.isValidShort" class="input-popup__error_text">Password should contain no less than 6 symbols</div>
                </div>
            </div>
        </mat-form-field>
        <div class="form-signin__group-buttons">
            <a [routerLink]="['/login']">Log in</a>
            <button class="btn btn-primary" type="submit" [disabled]="!isFormValid">Register</button>
            <div *ngIf="error" class="group-errors">{{error}}</div>
        </div>
    </form>
</div>
